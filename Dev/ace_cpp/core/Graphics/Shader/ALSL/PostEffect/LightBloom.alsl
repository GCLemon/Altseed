

// float2 GetTextureSize();
// float4 GetColor(float2 uv);
// float4 g_weight;

float4 CalcColor(float2 uv)
{
	float2 size = GetTextureSize();

#if BLUR_X
	float2 shift_p = float2(0.5/size.x, 0.5/size.y);
	float2 shift_m = float2(-0.5/size.x, 0.5/size.y);
	float2 adder = float2(2.0f/size.x,0.0);
#endif

#if BLUR_Y
	float2 shift_p = float2(0.5/size.x, 0.5/size.y);
	float2 shift_m = float2(0.5/size.x, -0.5/size.y);
	float2 adder = float2(0.0,2.0/size.y);
#endif

	float4 sum = float4(0.0,0.0,0.0,0.0);

	sum += g_weight.x * GetColor(uv+shift_p+adder*0.0);
	sum += g_weight.x * GetColor(uv+shift_m-adder*0.0);
	
	sum += g_weight.y * GetColor(uv+shift_p+adder*1.0);
	sum += g_weight.y * GetColor(uv+shift_m-adder*1.0);
	
	sum += g_weight.z * GetColor(uv+shift_p+adder*2.0);
	sum += g_weight.z * GetColor(uv+shift_m-adder*2.0);
	
	sum += g_weight.w * GetColor(uv+shift_p+adder*3.0);
	sum += g_weight.w * GetColor(uv+shift_m-adder*3.0);

	return sum;
}

